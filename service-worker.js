const RESOURCE_CACHE="wildlyinaccurate-resources",baseUrl=new URL("./",self.location);self.addEventListener("fetch",a=>{const b=new URL(a.request.url);b.origin===baseUrl.origin&&("/assets/"===b.pathname.substr(0,8)?a.respondWith(staleWhileRevalidate(a.request)):a.respondWith(networkFirst(a.request)))});function networkFirst(a){return fetch(a).then(b=>(caches.open(RESOURCE_CACHE).then(c=>{c.put(a,b)}),b.clone())).catch(()=>caches.match(a))}function staleWhileRevalidate(a){return caches.open(RESOURCE_CACHE).then(b=>b.match(a).then(c=>{const d=fetch(a).then(c=>(b.put(a,c.clone()),console.debug("Cache updated for",a.url),c)).catch(()=>{console.debug("Using stale cache for",a.url)});return c||d}))}